# 1 操作系统概述

## 1.1 操作系统的基本概念

### 1.1.1 什么是操作系统

操作系统（os）是管理硬件与软件资源的计算机程序

![image-20221211200846801](/Users/wyl/Library/Application Support/typora-user-images/image-20221211200846801.png)

#### 计算机系统组成

- 用户
- 应用程序
- 操作系统（os）
- 硬件

![image-20221211201146519](/Users/wyl/Library/Application Support/typora-user-images/image-20221211201146519.png)

#### os是一种系统软件

- 与硬件交互（应用软件安装在操作系统里，系统软件安装在硬件里）
- 对资源共享进行调度管理（资源也就是硬件资源）
- 解决并发操作处理中存在的协调问题
- 数据结构复杂，外部接口多样化

#### os做了哪些事

- 管理与配置内存
- 决定系统资源供需的优先次序
- 控制输入设备与输出设备
- 操作网络与管理文件系统等基本事务
- 提供一个用户与操作系统交互的界面

### 1.1.2 操作系统的目标与功能

#### 在计算机上配置os的目标：

- 有效性（管理系统资源）
  - 提高系统资源利用率
  - 提高系统的吞吐量
- 方便性
- 可扩充性
- 开放性

os的功能

- 作为计算机系统资源的管理者
- 作为用户与计算机硬件资源之间的接口
- 实现了对计算机资源的抽象

#### os作为计算机系统资源的管理者

- 处理机管理（一个处理机就是一个进程调度机制，我可否理解为cpu的一个核？对，cpu可以有多个核）
  - 进程控制
  - 进程同步
  - 进程通信
  - 调度
- 存储器管理
  - 内存分配
  - 内存保护
  - 地址映射
  - 内存扩充
- io设备管理
  - 缓冲管理
  - 设备分配
  - 设备处理
- 文件管理
  - 文件存储空间的管理
  - 目录管理
  - 文件的读写管理与保护

#### os作为用户与计算机硬件系统之间的接口

- 程序接口

  应用程序访问硬件资源，用户访问硬件资源，有什么不同？

- 程序接口

  操作系统对应用程序开放的接口   系统调用

- 命令接口

  用户可以直接访问操作系统

- GUI

#### os实现了对计算机资源的抽象

- 将具体的硬件资源抽象成软件，方便用户和应用程序使用

- 开放了简单的访问方式，隐藏了实现细节

- 举例

  ![image-20221211204636002](/Users/wyl/Library/Application Support/typora-user-images/image-20221211204636002.png)

### 1.3 操作系统的特征

os的特征

- #### 并发

  concurrence，并发是单核时间段的执行数量，并行是多核同时执行的数量？对

- #### 共享

  系统中的资源同时被多个并发进程使用

  - 同时访问：这种同时是宏观上的，微观上，这些进程可能是交替对该资源进行访问，比如磁盘就是共享资源
  - 互斥共享：也叫临界资源，比如打印机、音频设备、视频设备就属于临界资源

- #### 虚拟

  把一个物理实体变成多个逻辑实体

  - 时分复用

    - 虚拟处理机技术：时间片，轮询执行，比如四核把进程

      ![image-20221211212826795](/Users/wyl/Library/Application Support/typora-user-images/image-20221211212826795.png)

    - 虚拟设备技术：虚拟打印机，多个打印任务排序，时间片执行

  - 空分复用

    - 虚拟磁盘技术：将一块硬盘虚拟出多个卷

      ![image-20221211212959336](/Users/wyl/Library/Application Support/typora-user-images/image-20221211212959336.png)

    - 虚拟存储器技术

- #### 异步

  tm的就是并发，宏观上一气呵成，微观上走走停停

## 1.2 操作系统的运行环境

### 1.2.1 操作系统运行机制

- 时钟管理
- 中断机制
- 原语
- 系统数据结构
- 系统调用

操作系统是如何运行的

- 内核程序	用户程序
- 核心态     用户态
- 特权指令    非特权指令

![image-20221211220214322](/Users/wyl/Library/Application Support/typora-user-images/image-20221211220214322.png)

#### 时钟管理

- 计时：提供系统时间
- 时钟中断：比如进程/线程切换

#### 中断机制

- 提高并发下cpu利用率

- 外中断：中断信号来源于外部设备（被迫的）

- 内中断：中断信号来源于当前指令（自愿的）

  内中断也叫异常，内中断的三种情况

  - 陷阱/陷入（Trap）：由应用程序主动引发，陷入指令由程序引发，但由cpu产生

    ![image-20221211221632991](/Users/wyl/Library/Application Support/typora-user-images/image-20221211221632991.png)

  - 故障（fault）：由错误条件引发

    ![image-20221211221852368](/Users/wyl/Library/Application Support/typora-user-images/image-20221211221852368.png)

- 中断处理过程

  ![image-20221211222752130](/Users/wyl/Library/Application Support/typora-user-images/image-20221211222752130.png)

增加图片